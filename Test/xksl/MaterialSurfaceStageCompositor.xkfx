addResourcesLibrary "library"

convertAndLoadRecursif "MaterialSurfaceStageCompositor" MaterialSurfaceVertexStageCompositor
convertAndLoadRecursif "MaterialSurfaceStageCompositor" MaterialSurfacePixelStageCompositor

mixer m_IMaterialSurface
m_IMaterialSurface.mixin( IMaterialSurface )

mixer m_IStreamInitializer
m_IStreamInitializer.mixin( IStreamInitializer )

mixer m
m.mixin( MaterialSurfaceVertexStageCompositor )
m.mixin( MaterialSurfacePixelStageCompositor )

m.addComposition( MaterialSurfaceVertexStageCompositor.materialVertexStage = m_IMaterialSurface )
m.addComposition( MaterialSurfaceVertexStageCompositor.streamInitializerVertexStage = m_IStreamInitializer )
m.addComposition( MaterialSurfacePixelStageCompositor.materialPixelStage = m_IMaterialSurface )
m.addComposition( MaterialSurfacePixelStageCompositor.streamInitializerPixelStage = m_IStreamInitializer )


m.setStageEntryPoint( Vertex="VSMain", Pixel="PSMain" )
m.compile
