//Activate some additionnal options with xkslang main test program
//============================================
setSampleTestOptions automaticallyTryToLoadAndConvertUnknownMixinShader true
//============================================

addResourcesLibrary "library"

setDefine SILICON_STUDIO_RENDER_TARGET_COUNT "1"
setDefine SILICON_STUDIO_MULTISAMPLE_COUNT "1"

mixer m
m.mixin(
  MaterialSurfaceArray[
    layers = [
	  mixin(MaterialSurfaceSetStreamFromComputeColor<matDisplacement,r> [
	    computeColorSource = mixin(ComputeColorMultiply [
		  color1 = mixin(ComputeColorWave<5,0.01,-0.03>),
		  color2 = mixin(ComputeColorConstantFloatLink<Material.DisplacementValue>)
		])
	  ]),
	  mixin(MaterialSurfaceDisplacement<Position,meshNormal,false>)
	]
  ]
)
