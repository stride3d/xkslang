
shader Color
{
	stream int aStream1;
	stage stream int aStream2;
	stage stream float4 aStream3: SV_SEMANTIC;
	stage stream float4 aStreamBis: SV_OUTPUT;
	
	int Compute(int i)
	{
		streams.aStreamBis = i;
		streams.aStream1 = i + streams.aStream2;
		return streams.aStream3 + i;
	}
}

shader ShaderA
{
	stage stream float4 outStream: SV_OUTPUT;
	
	//return an error for now
	//stage stream float4 sameSemanticWithType1: SV_TOTO;
	//stage stream float2 sameSemanticWithType2: SV_TOTO;
	compose Color colors[];
	
	void main()
	{
		int res = 0;
		foreach (var color in colors){
			res += color.Compute(1);
		}
		streams.outStream += res;
		int i = streams.outStream;
	}
}
