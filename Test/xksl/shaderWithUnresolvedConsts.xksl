/****************************************************************************************
Parse const variables assigned with expression not immediately resolvable

*****************************************************************************************/

shader TestA
{
	static const int tata = 5, titi = 1;
	static const int toto[] = {tata, titi};
};

shader TestConsts1
{
	static const int D = A + B + C;
	static const int B = A + Z;
	static const int A = 0;
	static const int Z = C;
	static const int C = E + F;
	static const int E = F;
	static const int F = 6;
};

shader TestConsts2
{
	static const int Z = 0;
	static const int Z1 = A / Z;  //division by zero?
	static const int A = 5;
	static const int B = C + 1;
	static const int C = A + 2;
	static const float D[] = {A, B, C, (B) + C * A};
	static const int4 E = int4(A, 1, 2, 3);
	static const float4 F = float4(D[0] * D[2], D[E.z], D[Z], D[3] / Z1);
};

shader Math
{
	static const int tata = 5, titi = 1;
	
	static const int foo1 = tata + 10;
	static const int foo2 = 10 + tata;
	static const int foo3 = tata + 5 + titi;
	
	static const float3 colors[5] = { float3(0,1,0), float3(0,0,1), float3(1,0,1), float3(1,0,0), float3(1,1,1)};
	
    static const float PI = 3.14159265358979323846;
};

shader Test : Math
{
	static const int toto[] = {tata, titi};
	
	static const float PI4  =  4 * PI;
	static const float PI16 = 16 * PI;
	static const float PI64 = 64 * PI;        
	static const float SQRT_PI  = 1.77245385090551602729;
	
	static const float A0 = 1.0;
	static const float A1 = 2.0/3.0;
	static const float A2 = 1.0/4.0;
	static const float A3 = 0.0;
	static const float A4 = -1.0/24.0;
	static const float A[5*5] = 
	{ 
		A0, 
		A1, A1, A1, 
		A2, A2, A2, A2, A2,
		A3, A3, A3, A3, A3, A3, A3,
		A4, A4, A4, A4, A4, A4, A4, A4, A4
	};
};

//Test inter-dependencies consts
/*
shader SFail02
{
	static const int A = B;
	static const int B = C + D;
	static const int D = C;
	static const int C = A;
};*/

//Test uninitialized consts
/*shader SFail01
{
	static const int AAA;
	static const int BBB = AAA;
};*/
