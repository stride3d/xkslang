shader ShaderMain
{
	stage float depthOffset;
	stage float unusedVar;
	
	cbuffer PerDraw
    {
        stage float4x4 MatrixTransform;
		stage float4x3 Matrix4_3;
		[Color]
        stage float3 ColorMatrix;
		[Color]
		stage float4 ColorArray[2];
    }
	
	cbuffer PerDraw
    {
        [Color]
        stage float3 ColorFront;
		stage float3 ColorBack;
        stage float ColorBlend;
    }
	
    stage stream float4 Position : POSITION;
	stage stream float4 ShadingPosition : SV_Position;
	stage stream float4 ColorTarget : SV_Target0;
	stage stream float Depth : SV_Depth;
	
	stage void VSMain() 
	{
		streams.ShadingPosition = mul(streams.Position, MatrixTransform) + ColorArray[1];
	}
	
    stage void PSMain() 
    {
        streams.Depth = streams.ShadingPosition.w + depthOffset;
        streams.ColorTarget = float4(streams.ShadingPosition.x, streams.ShadingPosition.y, 1.0, 1.0);
    }
};