shader IShaderCompose
{
	void Compute()
	{
	}
}

shader TestShaderBase
{
	stage stream float3 sBase: SBASE;

	void Compute(Streams s)
	{
		s.sBase = 2;
		//s.sMain = 3; //parsing error: sMain is unknown
	}
}

shader TestShaderMain: TestShaderBase
{
	stage stream float3 sMain: SMAIN;

	compose IShaderCompose blends[];
	
	override void Compute(Streams s)
	{
		s.sMain = 1;
		base.Compute(s);
		
		var backup = streams;
		foreach(var blendStep in blends)
		{
			blendStep.Compute(backup);
		}
	}
	
	void VSMain()
	{
		Compute(streams);
	}
	
	void PSMain()
	{
		//Compute(streams);  //Fails with Xenko (a method using streams is called in both VS and PS stages)
	}
}
