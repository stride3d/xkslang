shader ShaderBase
{
	struct CustomStruct
	{
		float3 DirectionWS;
	};
}

shader ShaderMain: ShaderBase
{
	struct CustomStruct
	{
		float3 DirectionWS;
		float3 Color;
	};

	cbuffer aCBuffer
	{
		CustomStruct s1;
	}
	
	CustomStruct GetMainStruct1()
	{
		CustomStruct c1;
		return c1;
	}
	
	ShaderMain.CustomStruct GetMainStruct2()
	{
		ShaderMain.CustomStruct c1;
		return c1;
	}
	
	base.CustomStruct GetBaseStruct1()
	{
		base.CustomStruct c1;
		return c1;
	}
	
	ShaderBase.CustomStruct GetBaseStruct2()
	{
		ShaderBase.CustomStruct c1;
		return c1;
	}
	
	void aFunctionTakingMainStruct(CustomStruct c)
	{
	
	}
	
	void aFunctionTakingBaseStruct(base.CustomStruct c)
	{
	
	}
	
	base.CustomStruct ConvertStreamsToShaderBaseStreams(CustomStruct c)
	{
		base.CustomStruct c1 = {c.DirectionWS};
		return c1;
	}
	
	stage void VSMain()
	{
		CustomStruct c1 = GetMainStruct1();
		ShaderMain.CustomStruct c2 = GetMainStruct2();
		c1 = c2;
		aFunctionTakingMainStruct(c1);
		
		base.CustomStruct c3 = GetBaseStruct1();
		ShaderBase.CustomStruct c4 = GetBaseStruct2();
		c3 = c4;
		aFunctionTakingBaseStruct(c3);
		
		c3 = ConvertStreamsToShaderBaseStreams(c1);
	}
};
